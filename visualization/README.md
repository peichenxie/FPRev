# FPRev Visualization Scripts

This directory contains scripts for visualizing the experimental results from the FPRev paper.

## Files

### `plot_rq1.py`
Generates Figure 5 from the FPRev paper, showing the runtime comparison of different algorithms across multiple libraries.

**Usage:**
```bash
python visualization/plot_rq1.py
```

**Requirements:**
- pandas
- matplotlib
- numpy
- The `outputs/rq1.csv` file (generated by running `experiments/rq1.py`)

**Output:**
- Interactive matplotlib figure showing performance comparison
- Saved plot: `outputs/rq1_performance.png`

**Features:**
- Three subplots for NumPy, PyTorch, and JAX
- Log-scale y-axis for runtime visualization
- Color-coded lines for each algorithm:
  - Red: NaiveSol (naive solution)
  - Green: BasicFPRev (basic FP reverse mode)
  - Blue: FPRev (optimized FP reverse mode)
- Professional formatting matching the paper's figure style

### `plot_rq2.py`
Generates Figure 6 from the FPRev paper, showing the runtime comparison of BasicFPRev and FPRev algorithms across different mathematical operations in NumPy.

**Usage:**
```bash
python visualization/plot_rq2.py
```

**Requirements:**
- pandas
- matplotlib
- numpy
- The `outputs/rq2.csv` file (generated by running `experiments/rq2.py`)

**Output:**
- Interactive matplotlib figure showing performance comparison
- Saved plot: `outputs/rq2_performance.png`

**Features:**
- Three subplots for different operations:
  - Dot product: Vector dot product operations
  - Matrix-vector multiplication (GEMV): General matrix-vector multiplication
  - Matrix multiplication (GEMM): General matrix-matrix multiplication
- Log-log scale for both axes
- Color-coded lines for each algorithm:
  - Green: BasicFPRev (basic FP reverse mode)
  - Blue: FPRev (optimized FP reverse mode)
- Operation-specific x-axis scaling for optimal visualization

## Data Format

The visualization scripts expect CSV files with multi-level headers as generated by the experiments:

**RQ1 format:**
```
,NumPy,NumPy,NumPy,PyTorch,PyTorch,PyTorch,JAX,JAX,JAX
,NaiveSol,BasicFPRev,FPRev,NaiveSol,BasicFPRev,FPRev,NaiveSol,BasicFPRev,FPRev
4,0.005663,0.000105,0.000084,0.019314,0.000690,0.000123,0.016722,0.000257,0.000207
...
```

**RQ2 format:**
```
,Dot,Dot,GEMV,GEMV,GEMM,GEMM
,BasicFPRev,FPRev,BasicFPRev,FPRev,BasicFPRev,FPRev
4,0.000112,0.000075,0.000102,0.000092,0.000477,0.000111
...
```

## Adding New Visualizations

To add new visualization scripts:
1. Create a new Python file in this directory
2. Follow the same pattern as `plot_rq1.py` or `plot_rq2.py`
3. Update this README with documentation for the new script